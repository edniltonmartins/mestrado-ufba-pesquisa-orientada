<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://xmlns.jcp.org/jsf/passthrough">
	
	<f:metadata>
		<f:viewParam id="projectId" name="projectId" value="#{projectDetailMB.project.id}" required="true"  requiredMessage="#{messages['project.detail.error.projectId']}"  />
		<f:event listener="#{projectDetailMB.init}" type="preRenderView"/>
	</f:metadata>
	
	<h:body>
		<ui:composition template="layout/mainLayout.xhtml">
			<ui:define name="titlePage">Detalhes do Projeto</ui:define>
			
			<ui:define name="content">
			
				<section class="container">
					<h:panelGroup id="projectDetailAlert" layout="block" styleClass="alert alert-danger col-md-12" rendered="#{empty projectDetailMB.project.id}">
						<strong>Vish! </strong>
						<h:message for="projectId"  />
					</h:panelGroup>
				
					<h:panelGroup id="projectTitle" layout="block" styleClass="row">
						<div class="col-md-1">
							<a class="pull-left" href="#">
								<img class="media-object" data-src="holder.js/64x64" src="#{projectDetailMB.project.mediumLogoURL}"  />
							</a>
						</div>
						<div class="col-md-9">
							<h2> <h:outputText value="#{projectDetailMB.project.name}" /> </h2>
						</div>
					</h:panelGroup>
					
					
					<h:panelGroup id="projectSummary" layout="block" styleClass="row">
					
						<h2>Sumário</h2>
						<hr />
						
						<div class="col-md-6">
							<h:panelGroup id="projectDescription" p:itemprop="description" >
								<ui:repeat var="paragraph" value="#{projectDetailMB.projectDescritionParagraphs}">
									<p>
										<h:outputText value="#{paragraph}" /> 
									</p>
								</ui:repeat>
							</h:panelGroup>
							
							<div class="row"></div>
							
							<h4>Tags</h4>
							<h:panelGroup id="tagsPanel" rendered="#{not empty projectDetailMB.project.ohLohTags}">
								<span class="glyphicon glyphicon-tags" style="margin-right: 5px"></span>
								<ui:repeat var="tag" value="#{projectDetailMB.project.ohLohTags}">
									<span class="label label-info"><h:outputText value="#{tag.name}" /></span>      														
								</ui:repeat>      														
							</h:panelGroup>							
						</div>
						
						<div class="col-md-6">
							<h:panelGroup id="projectReferences" layout="block" styleClass="well">
								<h5>Referências</h5>
								
								<dl class="dl-horizontal">
									<dt><a href="#">Links do Projeto:</a></dt>
									<dd style="margin-bottom: .5em;">
										<h:outputLink title="Homepage" value="#{projectDetailMB.project.homepageURL}">
											<span class="glyphicon glyphicon-new-window"></span>
											Homepage
										</h:outputLink>
										<br />
										<h:outputLink title="Download" value="#{projectDetailMB.project.downloadURL}">
											<span class="glyphicon glyphicon-new-window"></span>
											Download
										</h:outputLink>
										<br />
										<ui:repeat var="link" value="#{projectDetailMB.project.ohLohLinks}">
											<h:link value="#{link.url}">
												<h:outputText value="#{link.title}" />
											</h:link>
											<br />
										</ui:repeat>
										<h:outputText  value=" " />
									</dd>
									
									<dt><a href="#">Links para Código:</a></dt>
									<dd style="margin-bottom: .5em;">
									
										<c:choose>
											<c:when test="${projectDetailMB.enlistmentCount eq 1}">
												<ui:repeat var="enlistment" value="#{projectDetailMB.enlistmentList}" >
													<h:link value="#{enlistment.ohLohRepository.url}" >
														<h:outputText value="#{enlistment.ohLohRepository.url}" />
													</h:link>
													<br />
												</ui:repeat>
											</c:when>
											<c:when test="${projectDetailMB.enlistmentCount > 1}">
												<h:link value="#">
													<h:outputText value="#{projectDetailMB.enlistmentCount} links" />
												</h:link>
											</c:when>
											<c:otherwise>
												<h:outputText  value="Sem links" />
											</c:otherwise>
										</c:choose>
									</dd>
									
									<dt><a href="#">Licenças:</a></dt>	
									<dd style="margin-bottom: .5em;">
										<c:choose>
											<c:when test="${projectDetailMB.project.ohLohLicenses not empty}">
												<ui:repeat var="license" value="#{projectDetailMB.project.ohLohLicenses}">
													<h:link value="#{license.name}">
														<h:outputText value="#{license.name}" />
													</h:link>
													<br />
												</ui:repeat>
											</c:when>
											<c:otherwise>
												<h:outputText value="Sem Licenças de Uso" />
											</c:otherwise>
										</c:choose>									
									</dd>						
								</dl>
							</h:panelGroup>
						</div>
						
						<div class="col-md-6">
							<h:panelGroup id="projectNutshel" layout="block" styleClass="well"  >
								<h5>Em resumo, <h:outputText value="#{projectDetailMB.project.name}" />...</h5>
							</h:panelGroup>
						</div>
						
						<div class="col-md-6">
							<h:panelGroup id="projectLanguages" layout="block" rendered="#{projectDetailMB.project.ohLohAnalysis}" >
							</h:panelGroup>
						</div>
					
					</h:panelGroup>
					
					<h:panelGroup id="activityPanel" layout="block" styleClass="row">
					
						<h2>Atividade</h2>
						<hr />
						
					</h:panelGroup>
					
					<h:panelGroup id="communityPanel" layout="block" styleClass="row">
					
						<h2>Comunidade</h2>
						<hr />
						
					</h:panelGroup>
				
				</section>
				
			</ui:define>
			
		</ui:composition>
	</h:body>
</html>