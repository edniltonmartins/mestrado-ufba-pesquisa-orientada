<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<ui:composition 
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
	>
      
	<!-- HEADER -->
	<div class="navbar navbar-default " role="navigation">
		<div class="container">
			<!-- Brand and toggle get grouped for better mobile display -->
  			<div class="navbar-header">
  				<h:button styleClass="navbar-toggle" p:data-toggle="collapse"  >
  					<span class="sr-only">Toggle navigation</span>
      				<span class="icon-bar"></span>
      				<span class="icon-bar"></span>
      				<span class="icon-bar"></span>
  				</h:button>	  			
  				<h:outputLink styleClass="navbar-brand" value="#{facesContext.externalContext.applicationContextPath}" >Sfohart</h:outputLink>
  			</div>
  			
  			<div class="collapse navbar-collapse navbar-right" >
  				<h:form styleClass="navbar-form navbar-left" p:role="search" >
  					<div class="form-group" style="margin-right: 5px">
  						<h:inputText styleClass="form-control" id="query" p:placeholder="Digite aqui"  value="#{mainMB.searchRequest.query}" />
  					</div>
  					<h:commandButton styleClass="btn btn-default" value="Buscar"
  						action="#{mainMB.loadResults}">
  						<f:param name="query" value="#{mainMB.searchRequest.query}"  />
  					</h:commandButton>
  				</h:form>
  				
  				<h:form styleClass="navbar-form navbar-right" prependId="false">
  					<h:panelGroup layout="block" rendered="#{loginMB.loggedUser eq null}">
  						<h:outputLink class="btn"  value="#{facesContext.externalContext.applicationContextPath}/login/login.jsf" style="margin-right: 10px" >
  							<span class="glyphicon glyphicon-log-in"></span> Entrar
  						</h:outputLink>
  						<button class="btn btn-success btn-mini" formaction="#{facesContext.externalContext.applicationContextPath}/account/newAccount.jsf" >
  							<span class="glyphicon glyphicon-plus-sign white"></span> Cadastre-se 
  						</button>
  					</h:panelGroup>
  					
  					<h:panelGroup layout="block" rendered="#{loginMB.loggedUser != null}">
  						<h:outputLink  class="btn" value="/login/login.jsf" style="margin-right: 10px" >
  							<span class="glyphicon glyphicon-user"></span> 
  							<h:outputText
  								rendered="#{loginMB.loggedUser.firstName != null and loginMB.loggedUser.login == null}"
  								style="margin-left: 10px; vertical-align: middle" 
  								value="#{loginMB.loggedUser.firstName}" />
  							<h:outputText
  								rendered="#{loginMB.loggedUser.firstName == null and loginMB.loggedUser.login != null}"
  								style="margin-left: 10px; vertical-align: middle" 
  								value="#{loginMB.loggedUser.login}" />
  						</h:outputLink>
  						<h:commandLink class="btn" action="#{loginMB.signOut}" >
  							<span class="glyphicon glyphicon-log-out"></span> Sair
  						</h:commandLink>
  					</h:panelGroup>
  				</h:form>
  			</div>
  			
		</div>		
	</div>		
</ui:composition>
